<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="896px" preserveAspectRatio="none" style="width:2201px;height:896px;background:#FFFFFF;" version="1.1" viewBox="0 0 2201 896" width="2201px" zoomAndPan="magnify"><title>Capital Selector Architecture</title><defs/><g><g class="title" data-source-line="1"><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="228.9629" x="979.1781" y="22.9951">Capital Selector Architecture</text></g><!--cluster capitalmarket--><g class="cluster" data-qualified-name="capitalmarket" data-source-line="9" id="ent0004"><path d="M8.5,81.9069 L119.4424,81.9069 A3.75,3.75 0 0 1 121.9424,84.4069 L128.9424,104.2038 L1277.5,104.2038 A2.5,2.5 0 0 1 1280,106.7038 L1280,886.8269 A2.5,2.5 0 0 1 1277.5,889.3269 L8.5,889.3269 A2.5,2.5 0 0 1 6,886.8269 L6,84.4069 A2.5,2.5 0 0 1 8.5,81.9069" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="128.9424" y1="104.2038" y2="104.2038"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="109.9424" x="10" y="96.902">capitalmarket</text></g><!--cluster capitalselector--><g class="cluster" data-qualified-name="capitalmarket.capitalselector" data-source-line="7" id="ent0002"><path d="M32.5,124.9069 L150.6406,124.9069 A3.75,3.75 0 0 1 153.1406,127.4069 L160.1406,147.2038 L1253.5,147.2038 A2.5,2.5 0 0 1 1256,149.7038 L1256,862.8269 A2.5,2.5 0 0 1 1253.5,865.3269 L32.5,865.3269 A2.5,2.5 0 0 1 30,862.8269 L30,127.4069 A2.5,2.5 0 0 1 32.5,124.9069" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="160.1406" y1="147.2038" y2="147.2038"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="117.1406" x="34" y="139.902">capitalselector</text></g><!--class Channel--><g class="entity" data-qualified-name="capitalmarket.capitalselector.Channel" data-source-line="9" id="ent0003"><rect fill="#F1F1F1" height="64.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="267.0078" x="126.5" y="184.3469"/><ellipse cx="227.0156" cy="200.3469" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M227.125,195.6906 L225.9688,200.7687 L228.2969,200.7687 L227.125,195.6906 Z M225.6406,193.4562 L228.625,193.4562 L231.9844,205.8469 L229.5313,205.8469 L228.7656,202.7844 L225.4844,202.7844 L224.7344,205.8469 L222.2969,205.8469 L225.6406,193.4562 Z " fill="#000000"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="57.4766" x="247.5156" y="205.1936">Channel</text><line style="stroke:#181818;stroke-width:0.5;" x1="127.5" x2="392.5078" y1="216.3469" y2="216.3469"/><line style="stroke:#181818;stroke-width:0.5;" x1="127.5" x2="392.5078" y1="224.3469" y2="224.3469"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="255.0078" x="132.5" y="241.342">+step(weight: float): (float r, float c)</text></g><!--class PhaseCChannel--><g class="entity" data-qualified-name="capitalmarket.capitalselector.PhaseCChannel" data-source-line="13" id="ent0005"><rect fill="#F1F1F1" height="64.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="402.7012" x="428.65" y="184.3469"/><ellipse cx="571.2237" cy="200.3469" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M567.1456,196.1125 L567.1456,193.9562 L574.5362,193.9562 L574.5362,196.1125 L572.0675,196.1125 L572.0675,204.1906 L574.5362,204.1906 L574.5362,206.3469 L567.1456,206.3469 L567.1456,204.1906 L569.6144,204.1906 L569.6144,196.1125 L567.1456,196.1125 Z " fill="#000000"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="109.0537" x="591.7237" y="205.1936">PhaseCChannel</text><line style="stroke:#181818;stroke-width:0.5;" x1="429.65" x2="830.3512" y1="216.3469" y2="216.3469"/><line style="stroke:#181818;stroke-width:0.5;" x1="429.65" x2="830.3512" y1="224.3469" y2="224.3469"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="390.7012" x="434.65" y="241.342">+step(weight: float): (float r, float c, bool alive, float dt)</text></g><!--class CapitalSelector--><g class="entity" data-qualified-name="capitalmarket.capitalselector.CapitalSelector" data-source-line="17" id="ent0006"><rect fill="#F1F1F1" height="276.1563" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="347.6172" x="46.19" y="350.0969"/><ellipse cx="162.4488" cy="366.0969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M165.4175,371.7375 Q164.8394,372.0344 164.1988,372.175 Q163.5582,372.3312 162.855,372.3312 Q160.355,372.3312 159.0269,370.6906 Q157.7144,369.0344 157.7144,365.9094 Q157.7144,362.7844 159.0269,361.1281 Q160.355,359.4719 162.855,359.4719 Q163.5582,359.4719 164.1988,359.6281 Q164.855,359.7844 165.4175,360.0812 L165.4175,362.8 Q164.7925,362.2219 164.1988,361.9562 Q163.605,361.675 162.98,361.675 Q161.6363,361.675 160.9488,362.7531 Q160.2613,363.8156 160.2613,365.9094 Q160.2613,368.0031 160.9488,369.0812 Q161.6363,370.1437 162.98,370.1437 Q163.605,370.1437 164.1988,369.8781 Q164.7925,369.5969 165.4175,369.0187 L165.4175,371.7375 Z " fill="#000000"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="106.5996" x="182.9488" y="370.9436">CapitalSelector</text><line style="stroke:#181818;stroke-width:0.5;" x1="47.19" x2="392.8072" y1="382.0969" y2="382.0969"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="92.5654" x="52.19" y="399.092">-wealth: float</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="166.1748" x="52.19" y="415.3889">-rebirth_threshold: float</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="128.4473" x="52.19" y="431.6857">-stats: EWMAStats</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="87.4248" x="52.19" y="447.9826">-reweight_fn</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="62.5146" x="52.19" y="464.2795">-kind: str</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="209.1318" x="52.19" y="480.5764">-rebirth_policy: RebirthPolicy?</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="165.874" x="52.19" y="496.8732">-channels: list[Channel]</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="87.8145" x="52.19" y="513.1701">-w: ndarray?</text><line style="stroke:#181818;stroke-width:0.5;" x1="47.19" x2="392.8072" y1="520.4719" y2="520.4719"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="149.2695" x="52.19" y="537.467">+allocate(): ndarray?</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="135.8984" x="52.19" y="553.7639">+stack_step(): void</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="229.3525" x="52.19" y="570.0607">+feedback(r: float, c: float): void</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="335.6172" x="52.19" y="586.3576">+feedback_vector(r_vec: ndarray, c: float): void</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="108.7119" x="52.19" y="602.6545">+rebirth(): void</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="93.249" x="52.19" y="618.9514">+state(): dict</text></g><!--class EWMAStats--><g class="entity" data-qualified-name="capitalmarket.capitalselector.EWMAStats" data-source-line="35" id="ent0007"><rect fill="#F1F1F1" height="96.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="171.6807" x="134.16" y="719.8469"/><ellipse cx="175.9789" cy="735.8469" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M178.9477,741.4875 Q178.3696,741.7844 177.7289,741.925 Q177.0883,742.0813 176.3852,742.0813 Q173.8852,742.0813 172.5571,740.4406 Q171.2446,738.7844 171.2446,735.6594 Q171.2446,732.5344 172.5571,730.8781 Q173.8852,729.2219 176.3852,729.2219 Q177.0883,729.2219 177.7289,729.3781 Q178.3852,729.5344 178.9477,729.8313 L178.9477,732.55 Q178.3227,731.9719 177.7289,731.7063 Q177.1352,731.425 176.5102,731.425 Q175.1664,731.425 174.4789,732.5031 Q173.7914,733.5656 173.7914,735.6594 Q173.7914,737.7531 174.4789,738.8313 Q175.1664,739.8938 176.5102,739.8938 Q177.1352,739.8938 177.7289,739.6281 Q178.3227,739.3469 178.9477,738.7688 L178.9477,741.4875 Z " fill="#000000"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="80.083" x="195.9387" y="740.6936">EWMAStats</text><line style="stroke:#181818;stroke-width:0.5;" x1="135.16" x2="304.8407" y1="751.8469" y2="751.8469"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="74.8604" x="140.16" y="768.842">+mu: float</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="74.9697" x="140.16" y="785.1389">+var: float</text><line style="stroke:#181818;stroke-width:0.5;" x1="135.16" x2="304.8407" y1="792.4406" y2="792.4406"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="159.6807" x="140.16" y="809.4357">+update(x: float): void</text></g><!--class StackChannel--><g class="entity" data-qualified-name="capitalmarket.capitalselector.StackChannel" data-source-line="41" id="ent0008"><rect fill="#F1F1F1" height="129.4844" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="402.7012" x="428.65" y="423.4269"/><ellipse cx="577.6324" cy="439.4269" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M580.6012,445.0675 Q580.023,445.3644 579.3824,445.505 Q578.7418,445.6613 578.0387,445.6613 Q575.5387,445.6613 574.2105,444.0206 Q572.898,442.3644 572.898,439.2394 Q572.898,436.1144 574.2105,434.4581 Q575.5387,432.8019 578.0387,432.8019 Q578.7418,432.8019 579.3824,432.9581 Q580.0387,433.1144 580.6012,433.4113 L580.6012,436.13 Q579.9762,435.5519 579.3824,435.2863 Q578.7887,435.005 578.1637,435.005 Q576.8199,435.005 576.1324,436.0831 Q575.4449,437.1456 575.4449,439.2394 Q575.4449,441.3331 576.1324,442.4113 Q576.8199,443.4738 578.1637,443.4738 Q578.7887,443.4738 579.3824,443.2081 Q579.9762,442.9269 580.6012,442.3488 L580.6012,445.0675 Z " fill="#000000"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="96.2363" x="598.1324" y="444.2736">StackChannel</text><line style="stroke:#181818;stroke-width:0.5;" x1="429.65" x2="830.3512" y1="455.4269" y2="455.4269"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="254.0371" x="434.65" y="472.422">-members: dict[str, PhaseCChannel]</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="119.4102" x="434.65" y="488.7189">-cfg: StackConfig</text><line style="stroke:#181818;stroke-width:0.5;" x1="429.65" x2="830.3512" y1="496.0206" y2="496.0206"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="390.7012" x="434.65" y="513.0157">+step(weight: float): (float r, float c, bool alive, float dt)</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="104.4805" x="434.65" y="529.3126">+stable(): bool</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="93.249" x="434.65" y="545.6095">+state(): dict</text></g><!--class StackManager--><g class="entity" data-qualified-name="capitalmarket.capitalselector.StackManager" data-source-line="49" id="ent0009"><rect fill="#F1F1F1" height="113.1875" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="231.2422" x="901.38" y="159.9069"/><ellipse cx="962.6881" cy="175.9069" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M965.6569,181.5475 Q965.0787,181.8444 964.4381,181.985 Q963.7975,182.1413 963.0944,182.1413 Q960.5944,182.1413 959.2662,180.5006 Q957.9537,178.8444 957.9537,175.7194 Q957.9537,172.5944 959.2662,170.9381 Q960.5944,169.2819 963.0944,169.2819 Q963.7975,169.2819 964.4381,169.4381 Q965.0944,169.5944 965.6569,169.8913 L965.6569,172.61 Q965.0319,172.0319 964.4381,171.7663 Q963.8444,171.485 963.2194,171.485 Q961.8756,171.485 961.1881,172.5631 Q960.5006,173.6256 960.5006,175.7194 Q960.5006,177.8131 961.1881,178.8913 Q961.8756,179.9538 963.2194,179.9538 Q963.8444,179.9538 964.4381,179.6881 Q965.0319,179.4069 965.6569,178.8288 L965.6569,181.5475 Z " fill="#000000"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="100.126" x="983.1881" y="180.7536">StackManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="902.38" x2="1131.6222" y1="191.9069" y2="191.9069"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="219.2422" x="907.38" y="208.902">-stacks: dict[str, StackChannel]</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="185.042" x="907.38" y="225.1989">-sediment: SedimentDAG?</text><line style="stroke:#181818;stroke-width:0.5;" x1="902.38" x2="1131.6222" y1="232.5006" y2="232.5006"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="139.5898" x="907.38" y="249.4957">+try_form_stack(...)</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="97.8154" x="907.38" y="265.7926">+maintain(...)</text></g><!--class RebirthPolicy--><g class="entity" data-qualified-name="capitalmarket.capitalselector.RebirthPolicy" data-source-line="56" id="ent0010"><rect fill="#F1F1F1" height="64.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="316.835" x="340.58" y="736.1369"/><ellipse cx="448.745" cy="752.1369" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M444.6669,747.9025 L444.6669,745.7462 L452.0575,745.7462 L452.0575,747.9025 L449.5888,747.9025 L449.5888,755.9806 L452.0575,755.9806 L452.0575,758.1369 L444.6669,758.1369 L444.6669,755.9806 L447.1357,755.9806 L447.1357,747.9025 L444.6669,747.9025 Z " fill="#000000"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="92.0049" x="469.245" y="756.9836">RebirthPolicy</text><line style="stroke:#181818;stroke-width:0.5;" x1="341.58" x2="656.415" y1="768.1369" y2="768.1369"/><line style="stroke:#181818;stroke-width:0.5;" x1="341.58" x2="656.415" y1="776.1369" y2="776.1369"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="304.835" x="346.58" y="793.132">+on_rebirth(selector: CapitalSelector): void</text></g><!--class SedimentNode--><g class="entity" data-qualified-name="capitalmarket.capitalselector.SedimentNode" data-source-line="60" id="ent0011"><rect fill="#F1F1F1" height="162.0781" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.3613" x="978.32" y="687.2469"/><ellipse cx="999.5901" cy="703.2469" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M1002.5589,708.8875 Q1001.9807,709.1844 1001.3401,709.325 Q1000.6995,709.4812 999.9964,709.4812 Q997.4964,709.4812 996.1682,707.8406 Q994.8557,706.1844 994.8557,703.0594 Q994.8557,699.9344 996.1682,698.2781 Q997.4964,696.6219 999.9964,696.6219 Q1000.6995,696.6219 1001.3401,696.7781 Q1001.9964,696.9344 1002.5589,697.2312 L1002.5589,699.95 Q1001.9339,699.3719 1001.3401,699.1062 Q1000.7464,698.825 1000.1214,698.825 Q998.7776,698.825 998.0901,699.9031 Q997.4026,700.9656 997.4026,703.0594 Q997.4026,705.1531 998.0901,706.2312 Q998.7776,707.2937 1000.1214,707.2937 Q1000.7464,707.2937 1001.3401,707.0281 Q1001.9339,706.7469 1002.5589,706.1687 L1002.5589,708.8875 Z " fill="#000000"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="103.4277" x="1014.9835" y="708.0936">SedimentNode</text><line style="stroke:#181818;stroke-width:0.5;" x1="979.32" x2="1126.6813" y1="719.2469" y2="719.2469"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="93.8643" x="984.32" y="736.242">+node_id: int</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="137.3613" x="984.32" y="752.5389">+members: list[str]</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="84.4785" x="984.32" y="768.8357">+mask: dict</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="97.7607" x="984.32" y="785.1326">+world_id: str</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="101.459" x="984.32" y="801.4295">+phase_id: str</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="44.6387" x="984.32" y="817.7264">+t: int</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="82.7148" x="984.32" y="834.0232">+run_id: str</text><line style="stroke:#181818;stroke-width:0.5;" x1="979.32" x2="1126.6813" y1="841.325" y2="841.325"/></g><!--class SedimentDAG--><g class="entity" data-qualified-name="capitalmarket.capitalselector.SedimentDAG" data-source-line="70" id="ent0012"><rect fill="#F1F1F1" height="96.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="373.0537" x="866.47" y="439.7269"/><ellipse cx="999.699" cy="455.7269" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M1002.6678,461.3675 Q1002.0896,461.6644 1001.449,461.805 Q1000.8084,461.9612 1000.1053,461.9612 Q997.6053,461.9612 996.2771,460.3206 Q994.9646,458.6644 994.9646,455.5394 Q994.9646,452.4144 996.2771,450.7581 Q997.6053,449.1019 1000.1053,449.1019 Q1000.8084,449.1019 1001.449,449.2581 Q1002.1053,449.4144 1002.6678,449.7112 L1002.6678,452.43 Q1002.0428,451.8519 1001.449,451.5862 Q1000.8553,451.305 1000.2303,451.305 Q998.8865,451.305 998.199,452.3831 Q997.5115,453.4456 997.5115,455.5394 Q997.5115,457.6331 998.199,458.7112 Q998.8865,459.7737 1000.2303,459.7737 Q1000.8553,459.7737 1001.449,459.5081 Q1002.0428,459.2269 1002.6678,458.6487 L1002.6678,461.3675 Z " fill="#000000"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="98.0957" x="1020.199" y="460.5736">SedimentDAG</text><line style="stroke:#181818;stroke-width:0.5;" x1="867.47" x2="1238.5237" y1="471.7269" y2="471.7269"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="223.918" x="872.47" y="488.722">-nodes: dict[int, SedimentNode]</text><line style="stroke:#181818;stroke-width:0.5;" x1="867.47" x2="1238.5237" y1="496.0237" y2="496.0237"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="104.2959" x="872.47" y="513.0189">+add_node(...)</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="14" lengthAdjust="spacing" textLength="361.0537" x="872.47" y="529.3157">+is_forbidden(candidate_members, phase_id): bool</text></g><g class="entity" data-qualified-name="GMN21" data-source-line="87" id="ent0022"><path d="M1296.46,173.6669 L1296.46,259.3309 L1601.5367,259.3309 L1601.5367,183.6669 L1591.5367,173.6669 L1296.46,173.6669" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1591.5367,173.6669 L1591.5367,183.6669 L1601.5367,183.6669 L1591.5367,173.6669" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="284.0767" x="1302.46" y="190.7338">Implements the notion of a capital channel.</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1302.46" y="205.8666">&#160;</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="115.356" x="1302.46" y="220.9994">math-v1.md &#167;2.2:</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="146.9355" x="1302.46" y="236.1322">R_i(t) = &#931;_k w_ik r_k(t)</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="191.5278" x="1302.46" y="251.265">C_i(t) explicit and subtractive</text></g><g class="entity" data-qualified-name="GMN24" data-source-line="95" id="ent0025"><path d="M1295.6,430.2069 L1295.6,546.1366 L1706.3969,546.1366 L1706.3969,440.2069 L1696.3969,430.2069 L1295.6,430.2069" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1696.3969,430.2069 L1696.3969,440.2069 L1706.3969,440.2069 L1696.3969,430.2069" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="168.7969" x="1301.6" y="447.2738">Canonical unit / mediator.</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1301.6" y="462.4066">&#160;</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="84.0493" x="1301.6" y="477.5394">math-v1.md:</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="123.1128" x="1301.6" y="492.6722">&#167;1.1 Units (w &#8712; &#916;&#8319;)</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="389.7969" x="1301.6" y="507.805">&#167;2 Weight Update (Exponentiated Gradient via reweight_fn)</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="122.5923" x="1301.6" y="522.9378">&#167;3 Statistics (&#956;, &#963;&#178;)</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="273.7935" x="1301.6" y="538.0706">&#167;7 Rebirth (state reset, history preserved)</text></g><g class="entity" data-qualified-name="GMN27" data-source-line="105" id="ent0028"><path d="M1295.96,733.0269 L1295.96,803.5581 L1460.0489,803.5581 L1460.0489,743.0269 L1450.0489,733.0269 L1295.96,733.0269" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1450.0489,733.0269 L1450.0489,743.0269 L1460.0489,743.0269 L1450.0489,733.0269" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="143.0889" x="1301.96" y="750.0938">Exponential statistics.</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1301.96" y="765.2266">&#160;</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="102.9526" x="1301.96" y="780.3594">math-v1.md &#167;6:</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="129.1812" x="1301.96" y="795.4922">&#956;(t), &#963;&#178;(t) via EWMA</text></g><g class="entity" data-qualified-name="GMN30" data-source-line="112" id="ent0031"><path d="M1741.09,452.9069 L1741.09,523.4381 L1934.9049,523.4381 L1934.9049,462.9069 L1924.9049,452.9069 L1741.09,452.9069" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1924.9049,452.9069 L1924.9049,462.9069 L1934.9049,462.9069 L1924.9049,452.9069" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="172.8149" x="1747.09" y="469.9738">Aggregated stack identity.</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1747.09" y="485.1066">&#160;</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="102.9526" x="1747.09" y="500.2394">math-v1.md &#167;7:</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="164.8232" x="1747.09" y="515.3722">Stack return and stability</text></g><g class="entity" data-qualified-name="GMN33" data-source-line="119" id="ent0034"><path d="M1969.68,437.7769 L1969.68,538.5738 L2194.3192,538.5738 L2194.3192,447.7769 L2184.3192,437.7769 L1969.68,437.7769" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2184.3192,437.7769 L2184.3192,447.7769 L2194.3192,447.7769 L2184.3192,437.7769" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="178.2295" x="1975.68" y="454.8438">Passive structural memory.</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1975.68" y="469.9766">&#160;</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="102.9526" x="1975.68" y="485.1094">math-v1.md &#167;8:</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="126.9976" x="1975.68" y="500.2422">Sediment nodes (&#957;)</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="115.1846" x="1975.68" y="515.375">Append-only DAG</text><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="203.6392" x="1975.68" y="530.5078">Hard exclusion via is_forbidden</text></g><!--reverse link Channel to CapitalSelector--><g class="link" data-entity-1="ent0003" data-entity-2="ent0006" data-link-type="extension" data-source-line="76" id="lnk13"><path codeLine="76" d="M235.6782,265.3601 C228.2482,281.1301 227.96,284.4869 224,303.0969 C220.8,318.0969 218.66,333.9469 217.3,349.7969" fill="none" id="Channel-backto-CapitalSelector" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="243.35,249.0769,230.2505,262.8028,241.1059,267.9174,243.35,249.0769" style="stroke:#181818;stroke-width:1;"/></g><!--reverse link CapitalSelector to Channel--><g class="link" data-entity-1="ent0006" data-entity-2="ent0003" data-link-type="aggregation" data-source-line="80" id="lnk17"><path codeLine="80" d="M242.1507,337.8168 C247.7607,299.9968 251.57,274.3169 255.33,248.9569" fill="none" id="CapitalSelector-backto-Channel" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="240.39,349.6869,245.2271,344.3387,242.1507,337.8168,237.3137,343.1649,240.39,349.6869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="'DejaVu Sans'" font-size="13" lengthAdjust="spacing" textLength="41.2852" x="248.06" y="316.1638">stacks</text></g><!--reverse link PhaseCChannel to StackChannel--><g class="link" data-entity-1="ent0005" data-entity-2="ent0008" data-link-type="extension" data-source-line="77" id="lnk14"><path codeLine="77" d="M630,266.9569 C630,309.4769 630,368.2569 630,423.1669" fill="none" id="PhaseCChannel-backto-StackChannel" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="630,248.9569,624,266.9569,636,266.9569,630,248.9569" style="stroke:#181818;stroke-width:1;"/></g><!--reverse link CapitalSelector to EWMAStats--><g class="link" data-entity-1="ent0006" data-entity-2="ent0007" data-link-type="aggregation" data-source-line="78" id="lnk15"><path codeLine="78" d="M220,638.5969 C220,671.9869 220,693.5069 220,719.4469" fill="none" id="CapitalSelector-backto-EWMAStats" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="220,626.5969,216,632.5969,220,638.5969,224,632.5969,220,626.5969" style="stroke:#181818;stroke-width:1;"/></g><!--reverse link CapitalSelector to RebirthPolicy--><g class="link" data-entity-1="ent0006" data-entity-2="ent0010" data-link-type="aggregation" data-source-line="79" id="lnk16"><path codeLine="79" d="M366.3677,635.0697 C407.4077,675.9897 440.15,708.6269 467.36,735.7469" fill="none" id="CapitalSelector-backto-RebirthPolicy" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="357.87,626.5969,359.2946,633.6659,366.3677,635.0697,364.9431,628.0007,357.87,626.5969" style="stroke:#181818;stroke-width:1;"/></g><!--reverse link StackManager to StackChannel--><g class="link" data-entity-1="ent0009" data-entity-2="ent0008" data-link-type="aggregation" data-source-line="81" id="lnk18"><path codeLine="81" d="M926.9646,280.2375 C864.4246,323.8175 787.34,377.5369 721.97,423.0769" fill="none" id="StackManager-backto-StackChannel" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="936.81,273.3769,929.6004,273.5254,926.9646,280.2375,934.1742,280.089,936.81,273.3769" style="stroke:#181818;stroke-width:1;"/></g><!--reverse link StackManager to SedimentDAG--><g class="link" data-entity-1="ent0009" data-entity-2="ent0012" data-link-type="aggregation" data-source-line="82" id="lnk19"><path codeLine="82" d="M1026.048,285.2713 C1032.598,334.3313 1040.43,393.0269 1046.63,439.4769" fill="none" id="StackManager-backto-SedimentDAG" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="1024.46,273.3769,1021.2892,279.8534,1026.048,285.2713,1029.2188,278.7948,1024.46,273.3769" style="stroke:#181818;stroke-width:1;"/></g><!--reverse link SedimentDAG to SedimentNode--><g class="link" data-entity-1="ent0012" data-entity-2="ent0011" data-link-type="aggregation" data-source-line="83" id="lnk20"><path codeLine="83" d="M1053,548.9769 C1053,590.1369 1053,638.3869 1053,686.9369" fill="none" id="SedimentDAG-backto-SedimentNode" style="stroke:#181818;stroke-width:1;"/><polygon fill="none" points="1053,536.9769,1049,542.9769,1053,548.9769,1057,542.9769,1053,536.9769" style="stroke:#181818;stroke-width:1;"/></g><!--link Channel to GMN21--><g class="link" data-entity-1="ent0003" data-entity-2="ent0022" data-link-type="association" data-source-line="87" id="lnk23"><path d="M281.9,184.1169 C310.35,145.3669 364.07,82.7369 428.5,58.9069 C470.7,43.2969 1195.8,44.6969 1238.5,58.9069 C1306.07,81.3969 1369.46,134.9969 1408.67,173.4369" fill="none" id="Channel-GMN21" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/></g><!--link CapitalSelector to GMN24--><g class="link" data-entity-1="ent0006" data-entity-2="ent0025" data-link-type="association" data-source-line="95" id="lnk26"><path d="M357.56,349.7769 C379.77,334.2069 403.67,320.6969 428.5,311.5969 C513,280.6169 1152.42,285.3369 1238.5,311.5969 C1314.28,334.7069 1388.01,387.8369 1437.93,429.8169" fill="none" id="CapitalSelector-GMN24" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/></g><!--link EWMAStats to GMN27--><g class="link" data-entity-1="ent0007" data-entity-2="ent0028" data-link-type="association" data-source-line="105" id="lnk29"><path d="M257.34,719.6069 C278.76,695.7869 307.85,669.5369 340.5,656.7469 C433.4,620.3469 1144.34,623.7369 1238.5,656.7469 C1281.37,671.7769 1320.86,706.1369 1346.8,732.7769" fill="none" id="EWMAStats-GMN27" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/></g><!--link StackChannel to GMN30--><g class="link" data-entity-1="ent0008" data-entity-2="ent0031" data-link-type="association" data-source-line="112" id="lnk32"><path d="M693.1,423.0769 C737.29,382.3769 800.12,333.6369 866.5,311.5969 C955.08,282.1769 1623.09,269.7069 1706.5,311.5969 C1765.08,341.0069 1804.19,410.2569 1823.62,452.7669" fill="none" id="StackChannel-GMN30" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/></g><!--link SedimentDAG to GMN33--><g class="link" data-entity-1="ent0012" data-entity-2="ent0034" data-link-type="association" data-source-line="119" id="lnk35"><path d="M1100.17,439.4869 C1145.56,396.4269 1218.49,336.6569 1295.5,311.5969 C1363.01,289.6169 1870.19,281.5169 1934.5,311.5969 C1989.68,337.3969 2031.46,395.1169 2056.22,437.5769" fill="none" id="SedimentDAG-GMN33" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/></g><?plantuml-src hLRDZjis4BxhAGPxah6sszq2JI2aA0mdJND8i8YHvX040atI5ckA54ZANgVD8SWb3z0tw27tdbCKs0VOl4EUf4EAiYLxZG153HWWESEPRxxvePnmaiEKLC8H2JCkENNQmCJGGZXSruOdTYLKHGmfWKfYxSGv8-Qruq-eLZFnXiEt7HN65wIMxYUjt3DISZXxo7yblzGm8ygU7PhwgfRIZfzGIYf2LsI9nxH1NnApucuSTpQ6SWQ_9Ga0cLjd27MDNvWMH2akKGRuExUEL-c6YsNXCbX8JTmWWpGim0oR4w03L7xhZGdbk5aGok6g89PF_vEr8Sorba2aMFFsaBcTZuYp2MQNbyR3QCE9T4KqtXmPFXV65Rah3BU5bgmdjOuucy6ZbqydCxzixpGeyuLg3f1tl8TCzMrMMWgwpU1vixyAsnyR7Th4ZiQbiEvLfE9rn9c1OiGOWjeDDqHAJOdZwQ0ZYgnXFlF07ShMMh3cVC4vcwCeDJ6Y8T0zhSTw-JfGbHg_s3avSIb6sFVeoGe0cQ2kduyTWMskoxhBy_cQcDw-hfYtTNtaksDpvWFlbz2evEMS6zj0U8K96VPBBV9B5yiitjTg8PR_J_qr5CnbuC0hVPMM0E4fKTYEkneD-Un5q0qq1c0v4oLNY7CMLmydZsD1EBFD5zgKUR2KZiVZ2Auas83uRuyEUh9NfMsUjChRNBUJ8Jlihhkp4t4zquotnXIkSu6TWauZf3PVeGamsjSjLBlQ4ORxZJQIXQjjavrNFg_z8zUnR6hL4Tu130bhAVUuMiRHmB07FY8YZELUhyEdi9xdkM2CgvGInOGlsZp6D8GMuRuQ0eosP1_yFXeTKedY_cWCIjq2y0OEXfj6bUw4kalUI-u9dTQd9ytN8Ahr2bGVGpcMxzdruWxNNQddDK4o_3C5nZSSw4NhFtbILf9xDGkkuFuj4rfv1GBnaO8uFST9KX9NZDONuvB1pSVByMMMFCz5wWRm0zp-cQzWauiLc7o5HycqaV3h2baG3Z1bOEjvUE2mcnEEUm_f2DX1agP4QIKeugWLcla6IeoBeAI79qjkFbwCB-05wbX8D_3bmmUu_UFBkty6ABc4bs7Im8imwY1zT5rfXK6Z8SxWiI5Cu0xMWa3dlV5Nl_EqEsmOGT7kxQSXV7v_yvUNt6lp36cOEdZJSgpd0fMrsKBbzsRDsU1ahFj2sWEIlY2YmqFAly-Isq_8QWF2q-iHUoidNVHgQB9S6huCCOUg0y6yJxSzT7GlIy95Z0c_hbIJF1otGgBoQL-TUhp2ziSq-v5G-oyqZ0jx5NavT7KVNSLx46O3ilpt89bK5RePQIMtuEtzJ0p3OgAojhv0VTpTaR37z2y0?></g></svg>